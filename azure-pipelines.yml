# Go
# Build your Go project.
# Add steps that test, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/go

trigger: 
 - master

pool:
  vmImage: 'ubuntu-18.04'

container: 
  image: luisescobar/dynatrace-push-event:1.0.0
  options:  -e DT_ENV_URL=$(DYNATRACE_ENVIRONMENT_URL) -e EVENT_EVENTTYPE=CUSTOM_DEPLOYMENT

steps:
- script: |-
    docker run --rm -e DT_ENV_URL=$(DYNATRACE_ENVIRONMENT_URL) \
    -e DT_API_TOKEN=$(DYNATRACE_API_TOKEN) luisescobar/dynatrace-push-event:1.0.0
  displayName: 'docker build'